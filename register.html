<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <title>TaskFlow - Inscription</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="register.css">
    <link rel="stylesheet" href="{{ asset('assets/css/bootstrap.min.css') }}">
</head> 
<body>
    <div class="main-wrapper">
        <div class="container">
            <div class="welcome-section">
                <div class="shape square-top"></div>
                <div class="shape square-bottom"></div>
                <div class="shape circle-large"></div>

                <div class="welcome-content">
                    <h1>BIENVENUE</h1>
                    <h2>TaskFlow - Gestion de Projets & TÃ¢ches</h2>
                    <p>Plateforme de gestion de projets et de tÃ¢ches pour optimiser votre productivitÃ©. Collaborez efficacement et atteignez vos objectifs plus rapidement.</p>
                </div>
            </div>
 
            <div class="form-section">
                <div class="form-content">
                    <h3>Inscription</h3>
                    <p class="subtitle">CrÃ©ez votre compte professionnel</p>

                    @if($errors->any())
                        <div class="alert alert-danger">
                            @foreach($errors->all() as $error)
                                <p>{{ $error }}</p>
                            @endforeach
                        </div>
                    @endif

                    <form id="signupForm" method="POST" action="{{ route('register') }}">
                        @csrf
                        
                        <div class="form-group">
                            <div class="input-wrapper">
                                <i class="fas fa-user input-icon"></i>
                                <input type="text" name="name" id="name" placeholder="Nom d'utilisateur" 
                                       value="{{ old('name') }}" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="input-wrapper">
                                <i class="fas fa-user input-icon"></i>
                                <input type="text" name="prenom" id="prenom" placeholder="PrÃ©nom" 
                                       value="{{ old('prenom') }}" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="input-wrapper">
                                <i class="fas fa-envelope input-icon"></i>
                                <input type="email" name="email" id="email" placeholder="Votre email" 
                                       value="{{ old('email') }}" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="phone-input-wrapper">
                                <select class="country-select" id="countryCode" name="country_code">
                                    <option value="+237" {{ old('country_code') == '+237' ? 'selected' : '' }}>ðŸ‡¨ðŸ‡² +237</option>
                                    <option value="+33" {{ old('country_code') == '+33' ? 'selected' : '' }}>ðŸ‡«ðŸ‡· +33</option>
                                    <option value="+1" {{ old('country_code') == '+1' ? 'selected' : '' }}>ðŸ‡ºðŸ‡¸ +1</option>
                                    <option value="+44" {{ old('country_code') == '+44' ? 'selected' : '' }}>ðŸ‡¬ðŸ‡§ +44</option>
                                    <option value="+49" {{ old('country_code') == '+49' ? 'selected' : '' }}>ðŸ‡©ðŸ‡ª +49</option>
                                    <option value="+39" {{ old('country_code') == '+39' ? 'selected' : '' }}>ðŸ‡®ðŸ‡¹ +39</option>
                                    <option value="+34" {{ old('country_code') == '+34' ? 'selected' : '' }}>ðŸ‡ªðŸ‡¸ +34</option>
                                    <option value="+32" {{ old('country_code') == '+32' ? 'selected' : '' }}>ðŸ‡§ðŸ‡ª +32</option>
                                    <option value="+41" {{ old('country_code') == '+41' ? 'selected' : '' }}>ðŸ‡¨ðŸ‡­ +41</option>
                                    <option value="+212" {{ old('country_code') == '+212' ? 'selected' : '' }}>ðŸ‡²ðŸ‡¦ +212</option>
                                    <option value="+213" {{ old('country_code') == '+213' ? 'selected' : '' }}>ðŸ‡©ðŸ‡¿ +213</option>
                                    <option value="+225" {{ old('country_code') == '+225' ? 'selected' : '' }}>ðŸ‡¨ðŸ‡® +225</option>
                                    <option value="+221" {{ old('country_code') == '+221' ? 'selected' : '' }}>ðŸ‡¸ðŸ‡³ +221</option>
                                    <option value="+234" {{ old('country_code') == '+234' ? 'selected' : '' }}>ðŸ‡³ðŸ‡¬ +234</option>
                                    <option value="+243" {{ old('country_code') == '+243' ? 'selected' : '' }}>ðŸ‡¨ðŸ‡© +243</option>
                                </select>
                                <input type="tel" name="phone" id="phone" placeholder="NumÃ©ro de tÃ©lÃ©phone" 
                                       value="{{ old('phone') }}" required>
                            </div>
                        </div>

                        <div class="form-group has-feedback">
                            <div class="input-wrapper">
                                <i class="fas fa-lock input-icon"></i>
                                <input type="password" name="password" id="password" placeholder="Mot de passe" required>
                                <button type="button" class="password-toggle" onclick="togglePassword('password', this)">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="password-strength" id="passwordStrength"></div>
                        </div>

                        <div class="form-group has-feedback">
                            <div class="input-wrapper">
                                <i class="fas fa-lock input-icon"></i>
                                <input type="password" name="password_confirmation" id="password_confirmation" placeholder="Confirmer le mot de passe" required>
                                <button type="button" class="password-toggle" onclick="togglePassword('password_confirmation', this)">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="password-match" id="passwordMatch"></div>
                        </div>

                        <button type="submit" class="btn-submit">S'inscrire</button>

                        <div class="divider">OU</div>

                        <div class="social-login-buttons">
                            <button type="button" class="btn-social btn-google" onclick="loginWithGoogle()">
                                <i class="fab fa-google"></i>
                                Google
                            </button>
                            <button type="button" class="btn-social btn-github" onclick="loginWithGithub()">
                                <i class="fab fa-github"></i>
                                GitHub
                            </button>
                        </div>

                        <div class="signin-link">
                            Vous avez un compte? <a href="{{ route('connexion') }}">Se connecter</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="shape circle-bottom-right"></div>
    </div>

    <script>
        const password = document.getElementById('password');
        const passwordConfirmation = document.getElementById('password_confirmation');
        const passwordStrength = document.getElementById('passwordStrength');
        const passwordMatch = document.getElementById('passwordMatch');

        function togglePassword(inputId, button) {
            const input = document.getElementById(inputId);
            const icon = button.querySelector('i');

            if (input.type === 'password') {
                input.type = 'text';
                icon.className = 'fas fa-eye-slash';
            } else {
                input.type = 'password';
                icon.className = 'fas fa-eye';
            }
        }

        password.addEventListener('input', function() {
            const value = this.value;

            if (value.length === 0) {
                passwordStrength.classList.remove('show');
                return;
            }

            passwordStrength.classList.add('show');

            let strength = 0;
            if (value.length >= 8) strength++;
            if (value.match(/[a-z]+/)) strength++;
            if (value.match(/[A-Z]+/)) strength++;
            if (value.match(/[0-9]+/)) strength++;
            if (value.match(/[$@#&!]+/)) strength++;

            passwordStrength.className = 'password-strength show';

            if (strength <= 2) {
                passwordStrength.classList.add('weak');
                passwordStrength.innerHTML = '<i class="fas fa-exclamation-circle"></i> Faible';
            } else if (strength <= 3) {
                passwordStrength.classList.add('medium');
                passwordStrength.innerHTML = '<i class="fas fa-shield-alt"></i> Moyen';
            } else {
                passwordStrength.classList.add('strong');
                passwordStrength.innerHTML = '<i class="fas fa-check-circle"></i> Fort';
            }

            checkPasswordMatch();
        });

        function checkPasswordMatch() {
            const confirmValue = passwordConfirmation.value;

            if (confirmValue === '') {
                passwordMatch.classList.remove('show');
                return;
            }

            passwordMatch.classList.add('show');

            if (password.value === confirmValue && confirmValue.length > 0) {
                passwordMatch.className = 'password-match show success';
                passwordMatch.innerHTML = '<i class="fas fa-check-circle"></i> Correspond';
            } else {
                passwordMatch.className = 'password-match show error';
                passwordMatch.innerHTML = '<i class="fas fa-times-circle"></i> Ne correspond pas';
            }
        }

        passwordConfirmation.addEventListener('input', checkPasswordMatch);

      function loginWithGoogle() {
    window.location.href = "{{ route('social.redirect', ['provider' => 'google']) }}";
}

function loginWithGithub() {
    window.location.href = "{{ route('social.redirect', ['provider' => 'github']) }}";
}
    </script>
</body>
</html>